(function(b){b.fn.rateit=function(f){if(this.length==0)return this;f=b.extend({},b.fn.rateit.defaults,f);return this.each(function(){var a=b(this);a.hasClass("rateit")||a.addClass("rateit");var g=a.data("rateit-min")||f.min,e=a.data("rateit-max")||f.max,h=a.data("rateit-step")||f.step,o=a.data("rateit-readonly")!==undefined?a.data("rateit-readonly"):f.readonly,p=a.data("rateit-resetable")!==undefined?a.data("rateit-resetable"):f.resetable,i=a.data("rateit-backingfld")||f.backingfld,j=a.data("rateit-starwidth")||
f.starwidth,l=a.data("rateit-starheight")||f.starheight,m=a.css("direction")!="rtl";if(i){var d=b(i);a.data("rateit-value",d.hide().val());if(d[0].nodeName=="INPUT")if(d[0].type=="range"||d[0].type=="text"){g=d.attr("min")||g;e=d.attr("max")||e;h=d.attr("step")||h}if(d[0].nodeName=="SELECT"&&d[0].options.length>1){g=d[0].options[0].value;e=d[0].options[d[0].length-1].value;h=d[0].options[1].value-d[0].options[0].value}}a.append('<div class="rateit-reset"></div><div class="rateit-range"><div class="rateit-selected" style="height:'+
l+'px"></div><div class="rateit-hover" style="height:'+l+'px"></div></div>');if(!m){b("div.rateit-reset",a).css("float","right");b("div.rateit-selected",a).addClass("rateit-selected-rtl");b("div.rateit-hover",a).addClass("rateit-hover-rtl")}var k=b("div.rateit-range",a);k.width(j*(e-g)).height(l);if(a.data("rateit-value")){e=(a.data("rateit-value")-g)*j;a.find("div.rateit-selected").width(e)}e=b("div.rateit-reset",a);if(o)e.hide();else{if(p){buffer=e.width();e.click(function(){a.data("rateit-value",
g);b("div.rateit-hover",a).hide().width(0);b("div.rateit-selected",a).width(0).show();i&&b(i).val(g);a.trigger("reset")})}else e.hide();k.mousemove(function(c){c=c.pageX-b(this).offset().left;m||(c=k.width()-c);c=Math.ceil(c/j*(1/h))*j*h;var n=b("div.rateit-hover",a);if(n.data("width")!=c){b("div.rateit-selected",a).hide();n.width(c).show();n.data("width",c)}});k.mouseleave(function(){b("div.rateit-hover",a).hide().width(0).data("width","");b("div.rateit-selected",a).show()});k.click(function(c){c=
c.pageX-b(this).offset().left;m||(c=k.width()-c);c=Math.ceil(c/j*(1/h));a.data("rateit-value",c*h+g);i&&b(i).val(c*h+g);b("div.rateit-selected",a).width(c*j*h);b("div.rateit-hover",a).hide();b("div.rateit-selected",a).show();a.trigger("rated")})}})};b.fn.rateit.defaults={min:0,max:5,step:0.5,starwidth:16,starheight:16,readonly:false,resetable:true};b("div.rateit").rateit()})(jQuery);