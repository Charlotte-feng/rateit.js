(function(b){b.fn.rateit=function(d){if(this.length==0)return this;d=b.extend({},b.fn.rateit.defaults,d);return this.each(function(){var a=b(this);a.hasClass("rateit")||a.addClass("rateit");var g=a.data("rateit-min")||d.min,f=a.data("rateit-max")||d.max,h=a.data("rateit-step")||d.step,m=a.data("rateit-readonly")!==undefined?a.data("rateit-readonly"):d.readonly,n=a.data("rateit-resetable")!==undefined?a.data("rateit-resetable"):d.resetable,i=a.data("rateit-backingfld")||d.backingfld,k=a.css("direction")!=
"rtl";if(i){var e=b(i);a.data("rateit-value",e.hide().val());if(e[0].nodeName=="INPUT")if(e[0].type=="range"||e[0].type=="text"){g=e.attr("min")||g;f=e.attr("max")||f;h=e.attr("step")||h}if(e[0].nodeName=="SELECT"&&e[0].options.length>1){g=e[0].options[0].value;f=e[0].options[e[0].length-1].value;h=e[0].options[1].value-e[0].options[0].value}}bgx=a[0].style.backgroundPositionX!==undefined;a.append('<div class="rateit-reset"></div><div class="rateit-range"><div class="rateit-selected" style="height:'+
d.starheight+'px"></div><div class="rateit-hover" style="height:'+d.starheight+'px"></div></div>');if(!k){b("div.rateit-reset",a).css("float","right");b("div.rateit-selected",a).addClass("rateit-selected-rtl");b("div.rateit-hover",a).addClass("rateit-hover-rtl")}var j=b("div.rateit-range",a);j.width(d.starwidth*(f-g)).height(d.starheight);if(a.data("rateit-value")){f=(a.data("rateit-value")-g)*d.starwidth;a.find("div.rateit-selected").width(f)}f=b("div.rateit-reset",a);if(m)f.hide();else{if(n){buffer=
f.width();f.click(function(){a.data("rateit-value",g);b("div.rateit-hover",a).hide().width(0);b("div.rateit-selected",a).width(0).show();i&&b(i).val(g);a.trigger("reset")})}else f.hide();j.mousemove(function(c){c=c.pageX-b(this).offset().left;k||(c=j.width()-c);c=Math.ceil(c/d.starwidth*(1/h))*d.starwidth*h;var l=b("div.rateit-hover",a);if(l.data("width")!=c){b("div.rateit-selected",a).hide();l.width(c).show();l.data("width",c)}});j.mouseleave(function(){b("div.rateit-hover",a).hide().width(0).data("width",
"");b("div.rateit-selected",a).show()});j.click(function(c){c=c.pageX-b(this).offset().left;k||(c=j.width()-c);c=Math.ceil(c/d.starwidth*(1/h));a.data("rateit-value",c*h+g);i&&b(i).val(c*h+g);b("div.rateit-selected",a).width(c*d.starwidth*h);b("div.rateit-hover",a).hide();b("div.rateit-selected",a).show();a.trigger("rated")})}})};b.fn.rateit.defaults={min:0,max:5,step:0.5,starwidth:16,starheight:16,readonly:false,resetable:true};b("div.rateit").rateit()})(jQuery);